// Embedded documentation for RAG client-side
// Each document contains keywords and content

export type Document = {
  id: string;
  keywords: string;
  content: string;
};

export const documents: Document[] = [
  {
    id: 'visao-geral',
    keywords:
      'plataforma sistema software aplicativo app ferramenta solução serviço SaaS inteligência artificial IA AI myeasyai dashboard painel produtos planos preço custo quanto custa assinatura mensal individual plus premium login cadastro entrar acessar pacotes pacote valores mensalidade',
    content: `# MyEasyAI - Visão Geral da Plataforma

MyEasyAI é uma plataforma completa de soluções de inteligência artificial para empresas e empreendedores.

## Produtos Disponíveis (7 produtos):
1. **MyEasyWebsite** - Criador de sites com IA
2. **Business Guru** - Consultoria de negócios com IA
3. **MyEasyPricing** - Ferramenta de precificação inteligente (calcular preços, margem de lucro)
4. **MyEasyCRM** - Sistema de gestão de clientes
5. **MyEasyContent** - Criador de conteúdo para redes sociais
6. **MyEasyAvatar** - Criador de avatares 3D (garoto propaganda digital, mascote)
7. **MyEasyCode** - Ambiente de desenvolvimento com IA

## Planos de Assinatura:
- **Individual**: R$ 29/mês - 1.000 tokens, 1 site, suporte por email
- **Plus**: R$ 49/mês (Mais Popular) - 10.000 tokens, 3 sites, suporte prioritário
- **Premium**: R$ 149/mês - 50.000 tokens, 5 sites, suporte 24/7

## Como Acessar:
1. Faça login na plataforma
2. Acesse o Dashboard
3. Vá para a aba "Produtos"
4. Clique em "Acessar" no produto desejado`,
  },
  {
    id: 'comecando-negocio',
    keywords:
      'começando negócio começar negócio novo negócio abrir empresa iniciar empresa empreender empreendedor primeira vez iniciante MEI microempreendedor pequena empresa startup dicas recomendação recomendar sugestão o que usar qual usar por onde começar primeiros passos',
    content: `# Recomendações para Quem Está Começando um Negócio

Se você está começando um negócio, aqui estão nossas recomendações de produtos na ordem de prioridade:

## 1. MyEasyPricing (ESSENCIAL para iniciantes!)
**Por que?** Antes de vender qualquer coisa, você precisa saber QUANTO COBRAR pelos seus produtos ou serviços. O MyEasyPricing calcula:
- Preço ideal considerando todos os custos
- Margem de lucro real
- Custos ocultos (taxas de cartão, impostos)
- Ponto de equilíbrio

## 2. MyEasyWebsite
Crie sua presença online com um site profissional em minutos.

## 3. Business Guru
Receba orientações estratégicas personalizadas para seu tipo de negócio.

## 4. MyEasyContent
Comece a divulgar nas redes sociais com conteúdo profissional.

## 5. MyEasyCRM
Organize seus primeiros clientes e acompanhe vendas.

## 6. MyEasyAvatar
Crie um mascote ou garoto propaganda para sua marca.

## Dica para MEI e Microempreendedores:
Comece com o plano Individual (R$ 29/mês) e use principalmente o **MyEasyPricing** para garantir que você está cobrando o preço certo e tendo lucro desde o início!`,
  },
  {
    id: 'myeasypricing',
    keywords:
      'myeasypricing myeasy pricing my easy pricing easypricing precificação calcular preço definir preço formação de preço quanto cobrar markup margem de lucro preço de venda custo do produto preço justo preço ideal tabela de preços calculadora de preço planilha de custos calcular margem rentabilidade lucratividade ponto de equilíbrio custos fixos custos variáveis impostos tributação taxa de cartão MEI simples nacional lucro presumido contabilidade financeiro finanças dinheiro lucro prejuízo começando negócio novo negócio vender produto vender serviço como funciona',
    content: `# MyEasyPricing - Ferramenta de Precificação

**ESSENCIAL para quem está começando um negócio!**

Calcule o preço ideal dos seus produtos considerando TODOS os custos. Não venda no prejuízo!

## O que o MyEasyPricing Calcula:
1. **Custos Diretos**: Matéria-prima, embalagem, custo de compra
2. **Custos Indiretos**: Aluguel, luz, internet, salários, contador
3. **Custos Ocultos**: Taxas de cartão (maquininha), comissões, frete, perdas
4. **Impostos**: Simples Nacional, Lucro Presumido, MEI

## Como Usar:
1. Crie uma Loja/Unidade de negócio
2. Cadastre seus custos fixos mensais (aluguel, luz, etc.)
3. Adicione custos ocultos (taxas de cartão 2-5%, etc.)
4. Configure seu regime tributário (MEI, Simples, etc.)
5. Cadastre produtos com custo direto
6. Defina a margem desejada
7. Veja o preço sugerido!

## Fórmulas Usadas:
- **Preço de Venda** = Custo Total / (1 - Margem - Impostos)
- **Margem Real** = (Preço - Custos - Impostos) / Preço
- **Lucro por Unidade** = Preço - Custo Total - Impostos

## Recursos:
- Exportar para Excel/CSV
- Múltiplas lojas/filiais
- Tutorial interativo
- Visualização em tabela ou cards

## Por que usar o MyEasyPricing?
Muitos empreendedores iniciantes vendem produtos sem saber se estão tendo lucro ou prejuízo. O MyEasyPricing garante que você considere TODOS os custos (inclusive os ocultos como taxas de cartão) para definir um preço que dê lucro de verdade.`,
  },
  {
    id: 'myeasyavatar',
    keywords:
      'myeasyavatar myeasy avatar my easy avatar easyavatar avatar avatar 3D boneco virtual personagem 3D garoto propaganda digital mascote digital representante virtual avatar personalizado foto de perfil identidade visual digital criar avatar fazer boneco personagem virtual modelo 3D avatar para empresa avatar profissional imagem de perfil persona digital influenciador virtual humano digital boneco 3D criar personagem fazer avatar meu avatar avatar animado corpo rosto cabelo roupas acessórios como funciona',
    content: `# MyEasyAvatar - Criador de Avatar 3D

O MyEasyAvatar é uma ferramenta para criar avatares 3D personalizados, ideal para criar seu GAROTO PROPAGANDA DIGITAL ou MASCOTE da empresa.

## Como Criar um Garoto Propaganda Digital:
1. No Dashboard, vá para "Produtos"
2. Clique em "Acessar" no MyEasyAvatar
3. Personalize o avatar com as cores da sua marca
4. Exporte e use nas redes sociais, site e materiais de marketing

## Personalização Disponível:
- **Corpo**: Altura, tipo físico, tom de pele, gênero
- **Rosto**: Formato, olhos, sobrancelhas, nariz, boca
- **Cabelo**: Estilo, cor, textura (liso, cacheado, crespo)
- **Roupas**: Camisetas, calças, sapatos, cores personalizadas
- **Acessórios**: Óculos, chapéus, joias, relógios

## Funcionalidades:
- Visualização 3D interativa (girar, zoom)
- Salvar avatares na biblioteca
- Exportar como imagem PNG
- Fundo transparente disponível
- Templates prontos para começar rápido

## Usos Comuns:
- Foto de perfil para redes sociais
- Mascote corporativo
- Representante virtual da marca
- Apresentações e vídeos`,
  },
  {
    id: 'myeasywebsite',
    keywords:
      'myeasywebsite myeasy website my easy website easywebsite criar site fazer site montar site construir site gerar site site automático landing page página web website website builder construtor de sites site profissional site para empresa presença online publicar site hospedagem domínio SEO Google responsivo celular mobile começar negócio como funciona',
    content: `# MyEasyWebsite - Criador de Sites com IA

Crie sites profissionais em minutos através de uma conversa guiada com IA.

## Como Criar um Site:
1. Acesse MyEasyWebsite no Dashboard
2. Escolha a área de atuação (Tecnologia, Varejo, Serviços, etc.)
3. Informe nome da empresa e slogan
4. Escolha estilo visual e cores
5. Selecione as seções (Hero, Sobre, Serviços, Contato, etc.)
6. A IA gera o site automaticamente!

## Seções Disponíveis:
- Hero (Banner Principal)
- Sobre Nós
- Serviços/Produtos
- Galeria de Fotos
- Depoimentos
- FAQ
- Preços
- Equipe
- Contato

## Recursos:
- Site responsivo (funciona no celular)
- SEO básico incluído
- HTTPS gratuito
- Publicação automática em subdomínio myeasyai.com
- Edição posterior permitida

## Limites por Plano:
- Individual: 1 site
- Plus: 3 sites
- Premium: 5 sites`,
  },
  {
    id: 'myeasycrm',
    keywords:
      'myeasycrm myeasy crm my easy crm easycrm CRM gestão de clientes gerenciar clientes cadastro de clientes controle de clientes sistema de vendas controle de vendas pipeline de vendas funil de vendas leads oportunidades prospects contatos comerciais gestão comercial equipe de vendas acompanhar vendas follow-up agenda comercial carteira de clientes organizar clientes como funciona',
    content: `# MyEasyCRM - Sistema de Gestão de Clientes

Gerencie contatos, empresas e pipeline de vendas em um só lugar.

## Seções do CRM:
1. **Dashboard**: Visão geral com métricas
2. **Contatos**: Cadastro de pessoas/leads
3. **Empresas**: Cadastro de empresas/contas
4. **Deals**: Pipeline de vendas (Kanban)
5. **Tarefas**: Follow-ups e pendências
6. **Atividades**: Histórico de interações

## Pipeline de Vendas (Funil):
1. Lead/Qualificação
2. Proposta Enviada
3. Negociação
4. Fechado - Ganho
5. Fechado - Perdido

## Funcionalidades:
- Arrastar e soltar deals entre estágios
- Registrar atividades (ligações, emails, reuniões)
- Criar tarefas com prioridades
- Filtros por status, origem, empresa
- Timeline de interações por contato

## Campos do Contato:
- Nome, Email, Telefone
- Empresa vinculada
- Cargo, Origem do lead
- Tags e Notas`,
  },
  {
    id: 'myeasycontent',
    keywords:
      'myeasycontent myeasy content my easy content content conteudo conteúdo criar conteúdo gerar conteúdo criador de posts gerador de posts conteúdo para Instagram conteúdo para Facebook conteúdo para LinkedIn conteúdo para TikTok social media marketing digital posts para redes sociais legendas captions hashtags calendário editorial banco de ideias reels stories feed publicações copywriting copy texto para redes sociais o que postar ideias de post divulgar empresa como funciona easycontent',
    content: `# MyEasyContent - Criador de Conteúdo para Redes Sociais

Gere posts, legendas e calendários editoriais com IA.

## Fluxo de Criação:
1. Escolha o nicho (Tecnologia, Moda, Fitness, etc.)
2. Informe nome do negócio
3. Descreva seu público-alvo
4. Escolha o tom de voz (Profissional, Casual, Inspiracional, etc.)
5. Selecione as redes sociais
6. Escolha o tipo de conteúdo
7. A IA gera tudo!

## Tipos de Conteúdo:
- Posts para Feed
- Legendas (captions)
- Stories
- Reels/Vídeos Curtos
- Calendário Editorial
- Banco de Ideias
- Hashtags
- Melhores Horários para postar

## Redes Suportadas:
- Instagram
- Facebook
- LinkedIn
- Twitter/X
- TikTok
- YouTube

## Funcionalidades:
- Copiar com 1 clique
- Salvar na biblioteca
- Gerar variações
- Exportar calendário (CSV/JSON)`,
  },
  {
    id: 'business-guru',
    keywords:
      'businessguru business guru business-guru guru consultor de negócios consultoria empresarial mentor de negócios coaching empresarial assessor de negócios conselheiro empresarial orientação estratégica ajuda para empresa dicas de negócio como melhorar meu negócio como crescer minha empresa planejamento estratégico gestão empresarial empreendedorismo empreender abrir empresa começar negócio expandir negócio marketing finanças vendas dicas para iniciantes como funciona',
    content: `# Business Guru - Consultoria de Negócios com IA

Seu consultor virtual para orientações estratégicas personalizadas.

## Na Primeira Vez:
O Business Guru faz perguntas para conhecer seu negócio:
- Área de atuação
- Nome da empresa
- Estágio (inicial, crescimento, estabelecido)
- Tamanho da equipe
- Faturamento atual
- Objetivos e desafios

## Tópicos Rápidos:
- **Marketing Digital**: Redes sociais, anúncios, tráfego
- **Finanças**: Fluxo de caixa, controle financeiro
- **Gestão de Pessoas**: Contratação, liderança, equipe
- **Estratégia**: Planejamento, crescimento, expansão

## Exemplos de Perguntas:
- "Como aumentar minhas vendas online?"
- "Qual estratégia de marketing usar?"
- "Como precificar meus produtos?" (use MyEasyPricing!)
- "Quando contratar funcionários?"
- "Como reduzir custos?"
- "Devo abrir uma filial?"

## Importante:
As orientações são baseadas em boas práticas, mas não substituem consultoria profissional especializada para questões jurídicas ou contábeis.`,
  },
  {
    id: 'myeasycode',
    keywords:
      'myeasycode myeasy code my easy code easycode programar programação código codificar desenvolver desenvolvimento IDE editor de código programação com IA escrever código criar software criar aplicativo criar app fazer programa desenvolvimento web frontend backend JavaScript TypeScript React Node.js Next.js HTML CSS terminal console debugging depuração compilar rodar código executar programa aprender programação como funciona',
    content: `# MyEasyCode - IDE de Desenvolvimento com IA

Programe diretamente no navegador com assistente de IA integrado.

## Interface:
- **Sidebar**: Explorador de arquivos
- **Editor**: Código com syntax highlighting
- **Terminal**: Linha de comando integrado
- **Chat IA**: Assistente de programação

## O que a IA faz:
- Gerar código a partir de descrições
- Explicar código selecionado
- Corrigir erros
- Refatorar e melhorar código
- Documentar funções

## Tecnologias Suportadas:
- React, Vue.js, Angular, Svelte
- Node.js, Express, Next.js
- JavaScript/TypeScript
- HTML/CSS
- Python (limitado)

## Templates Prontos:
- React Starter
- Next.js App
- Express API
- HTML/CSS/JS básico

## Recursos:
- Execução no navegador (WebContainer)
- Salvamento na nuvem
- Exportar como ZIP
- Múltiplos arquivos/pastas
- Atalhos de teclado (Ctrl+S, Ctrl+P, etc.)

## Limites por Plano:
- Individual: 3 projetos, 100 mensagens IA/mês
- Plus: 10 projetos, 500 mensagens IA/mês
- Premium: Ilimitado`,
  },
  {
    id: 'contabilidade',
    keywords:
      'contabilidade contador contábil nota fiscal NF NFe NFSe imposto IRPJ CSLL PIS COFINS ICMS ISS DAS DASN DEFIS declaração fiscal tributário tributos balanço balancete DRE fluxo de caixa livro caixa',
    content: `# Sobre Contabilidade

A plataforma MyEasyAI **NÃO é um sistema de contabilidade completo**. Não oferecemos:
- Emissão de notas fiscais (NF-e, NFS-e)
- Declarações fiscais (DAS, DEFIS, IRPJ)
- Livro caixa oficial
- Balanço patrimonial
- Obrigações acessórias

## O que oferecemos relacionado a finanças:

### MyEasyPricing
- Cálculo de preços considerando impostos
- Configuração de regime tributário (MEI, Simples, Lucro Presumido)
- Cálculo de margem de lucro

### Business Guru
- Dicas de gestão financeira
- Orientações sobre fluxo de caixa
- Planejamento financeiro básico

### MyEasyCRM
- Controle de vendas e clientes
- Pipeline de oportunidades

## Recomendação:
Para contabilidade completa, recomendamos contratar um contador profissional ou usar sistemas especializados como Contabilizei, Omie, Bling, ou similares.`,
  },
];

// List of product names for automatic correction
const productNames = [
  'myeasypricing',
  'myeasywebsite',
  'myeasyavatar',
  'myeasycrm',
  'myeasycontent',
  'myeasycode',
  'businessguru',
  'business guru',
];

// Function to clean words (removes extra characters at the end)
function cleanProductName(word: string): string {
  const lower = word.toLowerCase();

  // Try to find a product that is a prefix of the typed word
  for (const product of productNames) {
    if (lower.startsWith(product)) {
      return product;
    }
  }

  // Check if the word contains a product name
  for (const product of productNames) {
    if (lower.includes(product.replace(/\s/g, ''))) {
      return product;
    }
  }

  return lower;
}

// Search function with error tolerance
export function searchDocuments(query: string): string[] {
  // Clean the query - correct product names with extra characters
  const cleanedQuery = query
    .split(/\s+/)
    .map((word) => {
      // If it looks like a product name (starts with "myeasy" or "business")
      if (
        word.toLowerCase().startsWith('myeasy') ||
        word.toLowerCase().startsWith('business')
      ) {
        return cleanProductName(word);
      }
      return word.toLowerCase();
    })
    .join(' ');

  const queryWords = cleanedQuery.split(/\s+/).filter((w) => w.length > 2);

  const scored = documents.map((doc) => {
    const searchText = (doc.keywords + ' ' + doc.content).toLowerCase();
    let score = 0;

    for (const word of queryWords) {
      // Exact search
      const regex = new RegExp(word, 'gi');
      const matches = searchText.match(regex);
      if (matches) {
        score += matches.length * word.length;
      }

      // Partial search (if the word has more than 5 characters)
      if (word.length > 5 && !matches) {
        const partialWord = word.substring(0, Math.floor(word.length * 0.7));
        const partialRegex = new RegExp(partialWord, 'gi');
        const partialMatches = searchText.match(partialRegex);
        if (partialMatches) {
          score += partialMatches.length * (word.length * 0.5);
        }
      }
    }

    return { doc, score };
  });

  return scored
    .filter((s) => s.score > 0)
    .sort((a, b) => b.score - a.score)
    .slice(0, 4)
    .map((s) => s.doc.content);
}

export function getContext(query: string): string {
  const results = searchDocuments(query);
  if (results.length === 0) {
    // Return overview if nothing found
    return documents[0].content;
  }
  return results.join('\n\n---\n\n');
}
